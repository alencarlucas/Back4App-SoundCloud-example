<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SoundCLoud Example App</title>
</head>
<body>

</body>
<script src="https://connect.soundcloud.com/sdk/sdk-3.3.1.js"></script>
<script src="https://npmcdn.com/parse/dist/parse.min.js"></script>

<script>
  window.onload = function () {
    Parse.initialize("PnZGkpEvquaTsY0E7lfcaeZoaykHkEp3ZHHVWqKK", "bEk9obERgkgRBf3e5Ilt9FEYLD7NslMaagPgyl7i");

    Parse.serverURL = 'https://parseapi.back4app.com'
    SC.initialize({
      client_id: '1fb0d04a94f035059b0424154fd1b18c', // Here you put your SoundCloud app's client_id
      redirect_uri: 'http://localhost:8080/callback' // Here you put the redirect_uri 
    });

    var oauth_token

    // initiate auth popup
    SC.connect().then(function(response) {
      oauth_token = response.oauth_token
      return SC.get('/me');
    }).then(function(me) {
      var authData = {
        id: me.id,
        access_token: oauth_token
      }

      var user = new Parse.User();
      user._linkWith('soundCloud', { authData: authData }).then(function(createdUser) {
        alert('Sign up successful ! ' + createdUser.id)
      }).catch(function(err) {
        console.log('error:', err)
      })
    }).catch(function(err) {
      console.error(err)
    })
  }

</script>
</html>